############################
# rag-service (.env) - STAGING (DIRECT SUBDOMAINS)
# Copia este contenido a .env en rag-service/.
############################

APP_ENV=hosting
APP_DEBUG=0

# Cliente LLM (apunta al microservicio de OpenAI en staging)
OPENAI_SERVICE_URL=https://openai-staging.contenido.creawebes.com/v1/chat

# Firma interna HMAC (DEBE COINCIDIR CON LA APP PRINCIPAL)
INTERNAL_API_KEY=change-me-strong-random-staging

# Solo si generas embeddings con OpenAI directamente desde este servicio
OPENAI_API_KEY=TU_OPENAI_API_KEY_AQUI

# RAG embeddings (opcional)
RAG_USE_EMBEDDINGS=1
RAG_EMBEDDINGS_AUTOREFRESH=0
RAG_LOG_FILE=storage/logs/rag.log

# Circuit Breaker (OpenAI Service)
CB_FAILURE_THRESHOLD=3
CB_OPEN_TTL_SECONDS=30
CB_HALF_OPEN_MAX_CALLS=1
CB_STATE_FILE=storage/ai/circuit_breaker.json

# Logs de tokens
# Ruta absoluta donde se escriben los logs locales del rag-service (opcional).
# En staging dejar vac√≠o para usar la ruta relativa por defecto (rag-service/storage/ai/tokens.log),
# o configura AI_TOKENS_LOG_PATH para escribir en el storage central.
TOKENS_LOG_PATH=
# Log unificado (app principal + RAG). En staging apuntar al storage central.
# AI_TOKENS_LOG_PATH=/ruta/absoluta/a/tu/app-staging/storage/ai/tokens.log

# CORS (Pemitir desde la app de staging)
ALLOWED_ORIGINS=https://staging.contenido.creawebes.com,https://rag-staging.contenido.creawebes.com,https://openai-staging.contenido.creawebes.com
